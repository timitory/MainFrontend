"use strict";(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[2172],{2172:function(t,e,s){s.r(e),s.d(e,{default:function(){return p}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mt-8 px-6 pt-6 lg:px-20 pb-20 relative shadow-lg bg-white",staticStyle:{"box-shadow":"0px 20px 33px #00000029","min-height":"500px"}},[a("router-link",{staticClass:"absolute left-4 top-2",attrs:{to:"/app/dashboard"}},[a("font-awesome-icon",{staticClass:"text-green-600 ",attrs:{icon:"times-circle"}})],1),a("div",{staticClass:"flex mt-4 items-center"},[a("p",{staticClass:"text-lg lg:w-1/4 font-bold"},[t._v(t._s(t.name)+"'s dependants")]),t._m(0)]),a("div",{staticClass:"overflow-x-auto xl:overflow-x-hidden tablecont"},[!t.$store.state.loading&&t.dependants.length>0?a("table",{staticClass:"w-full mt-8"},[t._m(1),a("tbody",t._l(t.dependants,(function(e,s){return a("tr",{key:s,staticClass:"border border-solid border-gray-300"},[a("td",[t._v(t._s(e.firstname))]),a("td",[t._v(t._s(e.lastname))]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.phone))]),a("td",[a("button",{staticClass:"border border-solid rounded px-3 py-2 text-white text-center text-sm",staticStyle:{"background-color":"#A8004F"},on:{click:function(s){return t.removeDependant(e)}}},[t._v("Remove")])])])})),0)]):!t.$store.state.loading&&t.dependants.length<1?a("div",{staticClass:"w-full text-center py-4"},[a("img",{staticClass:"block  mx-auto",attrs:{src:s(9190),alt:""}}),a("p",{staticClass:"mt-4 text-center font-bold text-green-500 font-lg"},[t._v("No records")])]):t._e(),t.dependants.length>0?a("nav",{staticClass:"mt-8",attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"w-1/2 mx-auto  flex justify-between",staticStyle:{"max-width":"250px"}},[a("li",{staticClass:"page-item"},[1!=t.page?a("button",{staticClass:"inline text-green-500",attrs:{type:"button"},on:{click:function(e){t.page--}}},[t._v(" Previous ")]):a("button",{staticClass:"inline text-green-500 opacity-20"},[t._v("Previous")])]),a("li",{staticClass:"page-item"},[t.page<t.pages.length?a("button",{staticClass:"inline text-green-500",attrs:{type:"button"},on:{click:function(e){t.page++}}},[t._v(" Next ")]):a("button",{staticClass:"inline text-green-500 opacity-20"},[t._v("Next")])])])]):t._e()])],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ml-3 w-full lg:flex justify-between items-center"},[s("div",{staticClass:" lg:w-full"},[s("hr",{staticClass:"mt-2"}),s("hr",{staticClass:"mt-2"}),s("hr",{staticClass:"mt-2 border-green-500 bg-green-500 border-2"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"font-bold"},[t._v("Firstname")]),s("th",{staticClass:"font-bold"},[t._v("Lastname")]),s("th",{staticClass:"font-bold"},[t._v("Email")]),s("th",{staticClass:"font-bold"},[t._v("Phone")]),s("th",{staticClass:"font-bold"},[t._v("Action")])])])}],i=(s(4114),s(2505)),l=s.n(i),r=s(3717),o={data(){return{dependants:[],val:"",showFilter:!1,page:1,perPage:10,pages:[]}},computed:{filteredDependants(){return this.paginate(this.dependants.filter((t=>t.policy.includes(this.val))))},name(){return this.$store.state.user.firstname}},watch:{dependants(){this.setPages()}},methods:{filter(t){this.val=t,this.page=1,this.showFilter=!1},setPages(){let t=Math.ceil(this.dependants.length/this.perPage);for(let e=1;e<=t;e++)this.pages.push(e)},paginate(t){let e=this.page,s=this.perPage,a=e*s-s,n=e*s;return t.slice(a,n)},removeDependant(t){this.$store.commit("startLoading"),l()({url:`${r.A}/dependant`,data:{dependant_id:t.user_id},method:"DELETE"}).then((t=>{this.$store.commit("endLoading"),this.$store.commit("setSuccess",{status:!0,msg:t.data.message})})).catch((t=>{this.$store.dispatch("handleError",t)}))}},mounted(){this.$store.commit("startLoading"),l().get(`${r.A}/dependants`).then((t=>{this.dependants=t.data.data,this.$store.commit("endLoading")})).catch((t=>{this.$store.dispatch("handleError",t)}))}},d=o,c=s(1656),h=(0,c.A)(d,a,n,!1,null,"3b729cdf",null),p=h.exports},9190:function(t,e,s){t.exports=s.p+"img/Page-1.75b8f912.svg"}}]);
//# sourceMappingURL=2172.f37dd7bf.js.map