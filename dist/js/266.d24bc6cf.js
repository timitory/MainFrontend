"use strict";(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[266],{266:function(t,e,s){s.r(e),s.d(e,{default:function(){return $}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mt-8 px-6 pt-6 lg:px-20 pb-20 relative shadow-lg bg-white",staticStyle:{"box-shadow":"0px 20px 33px #00000029"}},[a("router-link",{staticClass:"absolute left-4 top-2",attrs:{to:"/app/dashboard"}},[a("font-awesome-icon",{staticClass:"text-green-600 ",attrs:{icon:"times-circle"}})],1),t._m(0),a("div",{staticClass:"overflow-x-auto xl:overflow-x-hidden tablecont"},[!t.$store.state.loading&&t.paginatedEnrollees.length>0?a("table",{staticClass:"w-full mt-8"},[t._m(1),a("tbody",t._l(t.paginatedEnrollees,(function(e,s){return a("tr",{key:s,staticClass:"border border-solid border-gray-300"},[a("td",[t._v(t._s(s+1))]),e.policy.name===t.fullname?a("td",{staticClass:"p-3"},[t._v("Myself")]):a("td",{staticClass:"p-3"},[t._v(t._s(e.policy.name))]),a("td",[t._v(t._s(e.policy.plan))]),a("td",[t._v(t._s(e.policy.policy_number))]),"Active"==e.policy.status||"Success"==e.policy.status?a("td",{staticClass:"text-green-500"},[t._v(t._s(e.policy.status))]):a("td",{staticClass:"text-red-500"},[t._v(t._s(e.policy.status))]),a("td",[t._v(t._s(e.policy.start))]),a("td",[t._v(t._s(e.policy.end))]),"Active"==e.policy.status||"Success"==e.policy.status?a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.action,expression:"action"}],staticClass:"focus:outline-none p-2 border border-solid border-gray-300 rounded",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.action=e.target.multiple?s:s[0]},function(s){return t.selectEnrollee(e)}]}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Select action")]),a("option",{attrs:{value:"stop"}},[t._v("Cancel")]),a("option",{attrs:{value:"items"}},[t._v("View Insured Items")]),a("option",{staticClass:"text-blue-500",attrs:{value:"view"}},[t._v("View repayment schedule")]),a("option",{staticClass:"text-blue-500",attrs:{value:"cert"}},[t._v("View Certificate")]),a("option",{attrs:{value:"claim"}},[t._v("Make Claim")])])]):a("td",[a("button",{staticClass:"text-white text-sm rounded bg-green-500 p-2 focus:outline-none",on:{click:function(s){return t.contactAdmin(e)}}},[t._v(" Contact Admin ")])])])})),0)]):!t.$store.state.loading&&t.paginatedEnrollees.length<1?a("div",{staticClass:"w-full text-center py-4"},[a("img",{staticClass:"block  mx-auto",attrs:{src:s(9190),alt:""}}),a("p",{staticClass:"mt-4 text-center font-bold text-green-500 font-lg"},[t._v("No records")])]):t._e(),t.paginatedEnrollees.length>0?a("nav",{staticClass:"mt-8",attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"w-1/2 mx-auto  flex justify-between",staticStyle:{"max-width":"250px"}},[a("li",{staticClass:"page-item"},[1!=t.page?a("button",{staticClass:"inline text-green-500",attrs:{type:"button"},on:{click:function(e){t.page--}}},[t._v(" Previous ")]):a("button",{staticClass:"inline text-green-500 opacity-20"},[t._v("Previous")])]),a("li",{staticClass:"page-item"},[t.page<t.pages.length?a("button",{staticClass:"inline text-green-500",attrs:{type:"button"},on:{click:function(e){t.page++}}},[t._v(" Next ")]):a("button",{staticClass:"inline text-green-500 opacity-20"},[t._v("Next")])])])]):t._e()]),a("div",{staticClass:"mt-24 flex justify-between"},[a("router-link",{staticClass:"text-green-500 block",attrs:{to:"/app/dashboard"}},[t._v("Back")])],1)],1),a("p",{staticClass:"mt-8 text-sm text-center"},[t._v("Itâ€™s important to note that you can purchase more than one policy and you can also add a dependent to any or multiple of these policies")]),t.showContact?a("Contact",{attrs:{enrollee:t.enrollee},on:{close:t.closeModal}}):t._e(),t.showItems?a("InsuredItems",{attrs:{items:t.items},on:{close:t.closeModal}}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex items-center"},[a("img",{staticStyle:{height:"140px",width:"170px"},attrs:{src:s(9481),alt:""}}),a("div",{staticClass:"ml-3 w-full lg:flex justify-between items-center"},[a("p",{staticClass:"text-lg font-bold lg:w-1/5"},[t._v("Home Content Insurance")]),a("div",{staticClass:" lg:w-3/4"},[a("hr",{staticClass:"mt-2"}),a("hr",{staticClass:"mt-2"}),a("hr",{staticClass:"mt-2 border-green-500 bg-green-500 border-2"})])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"font-bold"},[t._v("S/N")]),s("td",{staticClass:"font-bold"},[t._v("Name")]),s("td",{staticClass:"font-bold"},[t._v("Plan")]),s("td",{staticClass:"font-bold"},[t._v("Policy no")]),s("td",{staticClass:"font-bold"},[t._v("Status")]),s("td",{staticClass:"font-bold"},[t._v("Start Date")]),s("td",{staticClass:"font-bold"},[t._v("Due Date")]),s("td",{staticClass:"font-bold"},[t._v("Action")]),s("td",{staticClass:"font-bold"})])}],i=(s(4114),s(2505)),l=s.n(i),n=s(7816),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-modal"},[s("div",{staticClass:"loading-modal w-full"},[s("div",{staticClass:"loader bg-white mx-auto py-6 pb-8 px-10 relative"},[s("font-awesome-icon",{staticClass:"absolute  cursor-pointer text-red-500 text-xl right-2 top-2",attrs:{icon:"times-circle"},on:{click:function(e){return t.$emit("close")}}}),s("h1",{staticClass:"text-center font-bold text-2xl"},[t._v("Send Message to Paddycover Admin")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"border-solid border rounded mt-6 mx-auto w-full p-2 focus:outline-none",domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("button",{staticClass:"block w-full mt-6 text-white text-sm rounded bg-green-500 p-2 focus:outline-none",on:{click:t.sendMessage}},[t._v("Send Message")])],1)])])},r=[],d={props:["enrollee"],data(){return{message:""}},methods:{sendMessage(){this.$store.commit("startLoading"),l()({url:`${n.A}/support/admin`,data:{message:this.message},method:"POST"}).then((t=>{this.$store.commit("setSuccess",{status:!0,msg:t.data.message}),this.$emit("close"),this.$store.commit("endLoading")})).catch((t=>{this.$store.commit("endLoading"),this.$store.dispatch("handleError",t)}))}},mounted(){this.message=`I bought a ${this.enrollee.policy.plan} policy for ${this.enrollee.policy.name} but the status is ${this.enrollee.policy.status}`}},m=d,u=s(1656),p=(0,u.A)(m,c,r,!1,null,"755e8d8f",null),h=p.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-modal"},[s("div",{staticClass:"loading-modal w-full"},[s("div",{staticClass:"loader bg-white mx-auto py-6 pb-8 px-10 relative"},[s("font-awesome-icon",{staticClass:"absolute  cursor-pointer text-red-500 text-xl right-2 top-2",attrs:{icon:"times-circle"},on:{click:function(e){return t.$emit("close")}}}),s("h1",{staticClass:"font-bold text-2xl"},[t._v("Home Insured Items")]),s("ul",{staticClass:"grid lg:grid-cols-2 gap-4 mt-4"},t._l(t.items,(function(e,a){return s("li",{key:a},[s("p",{staticClass:"font-bold"},[t._v(t._s(e.name))]),s("p",{staticClass:"mt-2"},[t._v(t._s(e.amount))])])})),0)],1)])])},v=[],f={props:["items"],data(){return{message:""}},methods:{}},_=f,b=(0,u.A)(_,g,v,!1,null,"02ef9bb8",null),C=b.exports,x={components:{Contact:h,InsuredItems:C},data(){return{enrollees:[],enrollee:{},showContact:!1,showItems:!1,items:[],action:"",dependant:{},fullname:"",page:1,perPage:10,pages:[]}},computed:{user(){return this.$store.state.user},paginatedEnrollees(){return this.paginate(this.enrollees)}},watch:{enrollees(){this.setPages()}},methods:{selectEnrollee(t){"view"==this.action?(this.$store.commit("setEnrollee",t),this.$router.push("/app/dashboard/home/viewrepayment")):"stop"==this.action?(this.cancelPolicy(t.policy.user_home_id),this.action=""):"claim"==this.action?(this.$store.commit("setEnrollee",t),this.$router.push(`/app/dashboard/homeclaim/${t.policy.enrolee_id}`)):"cert"==this.action?(this.action="",window.open(t.policy.certificate_no,"_blank")):"items"==this.action&&(this.$store.commit("setActiveModal",1),this.items=t.policy_item,this.showItems=!0,this.action="")},contactAdmin(t){this.$store.commit("setActiveModal",1),this.showContact=!0,this.enrollee=t},closeModal(){this.showContact=!1,this.showItems=!1,this.action="",this.$store.commit("setActiveModal",0)},cancelPolicy(t){this.$store.commit("startLoading"),l()({url:`${n.A}/homecontent/policy/cancel`,data:{user_home_id:t},method:"POST"}).then((t=>{this.$store.commit("endLoading"),this.$store.commit("setSuccess",{status:!0,msg:t.data.message})})).catch((t=>{this.$store.commit("endLoading"),this.$store.dispatch("handleError",t)}))},setPages(){let t=Math.ceil(this.enrollees.length/this.perPage);for(let e=1;e<=t;e++)this.pages.push(e)},paginate(t){let e=this.page,s=this.perPage,a=e*s-s,o=e*s;return t.slice(a,o)}},mounted(){this.fullname=`${this.user.firstname} ${this.user.lastname}`,this.$store.commit("setActiveModal",0),this.$store.commit("startLoading"),l().get(`${n.A}/homecontent/policy`).then((t=>{this.enrollees=t.data.data,this.$store.commit("endLoading")})).catch((t=>{this.$store.commit("endLoading"),this.$store.dispatch("handleError",t)}))}},y=x,w=(0,u.A)(y,a,o,!1,null,"7586ee90",null),$=w.exports},9190:function(t,e,s){t.exports=s.p+"img/Page-1.75b8f912.svg"},9481:function(t,e,s){t.exports=s.p+"img/Image 10.f6a9f783.png"}}]);
//# sourceMappingURL=266.d24bc6cf.js.map