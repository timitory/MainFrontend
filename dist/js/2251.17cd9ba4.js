(self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[]).push([[2251],{2561:function(t,e,a){"use strict";a.d(e,{A:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"l-modal"},[a("div",{staticClass:"loading-modal w-full"},[a("div",{staticClass:"loader bg-white w-4/5 mx-auto rounded px-4 lg:px-8 pb-6"},[a("div",{staticClass:"flex justify-end pt-6",on:{click:t.close}},[a("svg",{staticClass:"text-green-600 svg-inline--fa fa-times-circle",attrs:{"data-v-e1915176":"","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times-circle",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[a("path",{attrs:{"data-v-e1915176":"",fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}})])]),a("div",{staticClass:"pt-6 relative"},[a("div",{staticClass:"py-4"},[a("h1",{staticClass:"font-bold text-xl text-center"},[t._v("Pay with existing card or use a new card?")]),a("div",{staticClass:"mt-8 md:flex md:w-3/4 md:mx-auto md:items-center gap-6"},[a("button",{staticClass:"focus:outline-none block w-full rounded border border-solid border-green-500 text-green-500 text-white md:px-3 py-2",on:{click:t.useOldCard}},[t._v("Yes, proceed")]),a("button",{staticClass:"mt-4 md:mt-0 block w-full focus:outline-none rounded border border-solid border-red-500 text-red-500 text-white md:px-3 py-2",on:{click:t.useNewCard}},[t._v("No. new card")])])])])])])])},i=[],n={data(){return{}},methods:{close(){this.$emit("close")},useOldCard(){this.$emit("useCard","old")},useNewCard(){this.$emit("useCard","new")}}},c=n,o=a(1656),r=(0,o.A)(c,s,i,!1,null,"6c110a95",null),l=r.exports},2251:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return y}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-6 lg:pb-8"},[a("div",{staticClass:"lg:w-3/4 lg:mx-auto"},[a("p",{staticClass:"font-bold text-lg"},[t._v("Quotation Form")]),a("p",{staticClass:"mt-2"},[t._v(t._s(t.quote.policy.vehicle_category)+" Vehicle Cover")]),a("hr",{staticClass:"mt-4"}),a("ul",{staticClass:"mt-8 md:mt-10 md:flex md:gap-10"},[a("li",[a("ul",{staticClass:"flex justify-between md:gap-10"},[a("li",{staticClass:"item"},[a("p",[t._v("Vehicle Make")]),a("p",{staticClass:"mt-4 font-bold"},[t._v(t._s(t.quote.policy.vehicle_make))])]),a("li",{staticClass:"item"},[a("p",[t._v("Vehicle Model")]),a("p",{staticClass:"mt-4 font-bold"},[t._v(t._s(t.quote.policy.vehicle_model))])])])]),a("li",{staticClass:"item mt-6 md:mt-0"},[a("p",[t._v("Vehicle Type")]),a("p",{staticClass:"mt-4 font-bold"},[t._v(t._s(t.quote.policy.vehicle_class))])])]),a("ul",{staticClass:"mt-6 md:mt-8 md:flex md:gap-10"},[a("li",[a("ul",{staticClass:"flex justify-between md:gap-10"},[a("li",{staticClass:"item"},[a("p",[t._v("Excess Buyback")]),"Third Party"==t.quote.policy.vehicle_category_id?a("p",{staticClass:"mt-4 font-bold"},[t._v("No")]):a("p",{staticClass:"mt-4 font-bold"},[t._v("Yes")])]),a("li",{staticClass:"item"},[a("p",[t._v("Flood Damage")]),a("p",{staticClass:"mt-4 font-bold"},[t._v(t._s(t.quote.policy.flood_cover))])])])])]),a("div",{staticClass:"py-8 md:py-12 md:flex md:w-3/4 md:justify-between"},[a("div",{staticClass:"md:mr-4"},[a("p",{staticClass:"text-green-500 font-bold"},[t._v("Actual Premium")]),a("p",{staticClass:"mt-4 font-bold"},[t._v(t._s(t.quote.policy.total_amount))])])]),a("hr"),a("div",{staticClass:"md:flex md:justify-between md:items-end"},[a("div",[1==t.$store.state.vehicle_category_id?a("div",[a("p",{staticClass:"mt-6 md:mt-8 text-green-500 font-bold"},[t._v(" Annual Premium ")]),a("p",{staticClass:"mt-4 text-xl md:text-2xl font-extrabold"},[t._v(t._s(t.quote.price))])]):a("div",[a("p",{staticClass:"mt-6 md:mt-8 text-green-500 font-bold"},[t._v(" Monthly Premium ")]),a("p",{staticClass:"mt-4 text-xl md:text-2xl font-extrabold"},[t._v(t._s(t.quote.policy.amount))])]),a("div",[a("div",{staticClass:"mt-4 flex items-center gap-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.check,expression:"check"}],attrs:{type:"checkbox"},domProps:{value:1,checked:Array.isArray(t.check)?t._i(t.check,1)>-1:t.check},on:{change:function(e){var a=t.check,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=1,c=t._i(a,n);s.checked?c<0&&(t.check=a.concat([n])):c>-1&&(t.check=a.slice(0,c).concat(a.slice(c+1)))}else t.check=i}}}),a("p",{staticClass:"text-sm"},[t._v("I accept "),a("router-link",{staticClass:"text-blue-500",attrs:{to:"/terms"}},[t._v("terms and conditions")])],1)]),t.showError?a("p",{staticClass:"text-red-500 text-xs mt-2"},[t._v("Please accept terms")]):t._e()])]),a("div",{},[a("button",{staticClass:"block w-full bg-green-500 mt-12 md:mt-0 text-white px-12 py-2 rounded focus:outline-none",on:{click:t.initiatePayment}},[t._v("Buy Policy")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showPaystack,expression:"showPaystack"}]},[a("Paystack",{ref:"paystackbutton",staticClass:" hidden mt-6 w-full bg-green-500 text-white py-2 rounded outline-none focus:outline-none",attrs:{amount:t.paystackData.amount,email:t.paystackData.email,paystackkey:t.paystackData.public_key,reference:t.paystackData.reference,callback:t.verifyPayment,close:t.closePayment,channels:t.paystackData.channels}})],1),a("transition",{attrs:{name:"scale"}},[t.showMethodModal?a("PaymentMethod",{on:{useCard:t.payWithCard}}):t._e()],1)],1)])},i=[],n=(a(4114),a(5353)),c=a(9401),o=a.n(c),r=a(2505),l=a.n(r),d=a(7816),u=a(2561),m={components:{Paystack:o(),PaymentMethod:u.A},data(){return{paystackData:{public_key:"",email:"",amount:0,reference:""},paystackChannels:["card","bank","ussd","qr","mobile_money","bank_transfer"],showPaystack:!1,check:[],showError:!1,showMethodModal:!1}},computed:{...(0,n.aH)({quote:t=>t.vehicleQuote,user:t=>t.user})},watch:{},methods:{initiatePayment(){this.showMethodModal=!0},payWithCard(t){this.showMethodModal=!1,"old"===t?this.$router.push("/app/dashboard/buyvehicle/5"):"new"===t&&this.payNow()},payNow(){if(this.check.length>0){this.$store.commit("startLoading");let t={user_vehicle_id:this.quote.user_vehicle_id};l()({url:`${d.A}/vehicle/payment/init`,data:t,method:"POST"}).then((t=>{this.showPaystack=!0,this.paystackData=t.data.data,this.paystackData.channels=this.paystackChannels,this.$refs.paystackbutton.payWithPaystack(this.paystackData)})).catch((t=>{this.$store.dispatch("handleError",t)}))}else this.showError=!0},verifyPayment(){l()({url:`${d.A}/vehicle/payment/verify`,data:{reference:this.paystackData.reference},method:"POST"}).then((t=>{this.$store.commit("endLoading"),this.$store.commit("setSuccess",{status:!0,msg:t.data.message}),this.$router.push("/app/dashboard/managevehicle")})).catch((t=>{this.$store.commit("endLoading"),this.$store.commit("setError",{status:!0,msg:t.response.data.message})}))},closePayment(){this.$store.commit("endLoading"),this.$store.commit("setError",{status:!0,msg:"Payment cancelled"})}},mounted(){}},p=m,h=a(1656),f=(0,h.A)(p,s,i,!1,null,"09b0d70e",null),y=f.exports},9401:function(t){!function(e,a){t.exports=a()}(window,(function(){return a={},t.m=e=[function(t,e,a){"use strict";a.r(e);var s,i,n,c,o,r,l,d,u,m,p;c=!(n=[]),l=r=o=null,p="function"==typeof(s={props:{embed:{type:Boolean,default:!1},paystackkey:{type:String,required:!0},email:{type:String,required:!0},firstname:{type:String,default:""},lastname:{type:String,default:""},amount:{type:Number,required:!0},reference:{type:String,required:!0},channels:{type:Array,default:function(){return["card","bank"]}},accessCode:{type:String,default:""},callback:{type:Function,required:!0,default:function(){}},close:{type:Function,required:!0,default:function(){}},metadata:{type:Object,default:function(){return{}}},currency:{type:String,default:"NGN"},plan:{type:String,default:""},quantity:{type:String,default:""},subaccount:{type:String,default:""},split:{type:Object,default:function(){return{}}},splitCode:{type:String,default:""},transactionCharge:{type:Number,default:0},bearer:{type:String,default:""}},data:function(){return{scriptLoaded:null}},created:function(){var t=this;this.scriptLoaded=new Promise((function(e){t.loadScript((function(){e()}))}))},mounted:function(){this.embed&&this.payWithPaystack()},methods:{loadScript:function(t){var e=document.createElement("script");e.src="https://js.paystack.co/v1/inline.js",document.getElementsByTagName("head")[0].appendChild(e),e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,t())}:e.onload=function(){t()}},isDynamicSplit:function(){return this.split.constructor===Object&&0<Object.keys(this.split).length},payWithPaystack:function(){var t=this;this.scriptLoaded&&this.scriptLoaded.then((function(){var e={key:t.paystackkey,email:t.email,firstname:t.firstname,lastname:t.lastname,channels:t.channels,amount:t.amount,access_code:t.accessCode,ref:t.reference,callback:function(e){t.callback(e)},onClose:function(){t.close()},metadata:t.metadata,currency:t.currency,plan:t.plan,quantity:t.quantity,subaccount:t.isDynamicSplit()?"":t.subaccount,split:t.isDynamicSplit()?t.split:null,split_code:t.isDynamicSplit()?"":t.splitCode,transaction_charge:t.isDynamicSplit()?0:t.transactionCharge,bearer:t.isDynamicSplit()?"":t.bearer};t.embed&&(e.container="paystackEmbedContainer"),e=window.PaystackPop.setup(e),t.embed||e.openIframe()}))}}})?s.options:s,(i=function(){var t=this,e=t._self._c||t.$createElement;return t.embed?e("div",{attrs:{id:"paystackEmbedContainer"}}):e("button",{staticClass:"payButton",on:{click:t.payWithPaystack}},[t._t("default",[t._v("Make Payment")])],2)})&&(p.render=i,p.staticRenderFns=n,p._compiled=!0),c&&(p.functional=!0),r&&(p._scopeId="data-v-"+r),l?p._ssrRegister=u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)}:o&&(u=d?function(){o.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:o),u&&(p.functional?(p._injectStyles=u,m=p.render,p.render=function(t,e){return u.call(e),m(t,e)}):p.beforeCreate=(d=p.beforeCreate)?[].concat(d,u):[u]),a={exports:s,options:p};e.default=a.exports}],t.c=a,t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:s})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)t.d(s,i,function(t){return e[t]}.bind(null,i));return s},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="/dist/",t(t.s=0);function t(s){if(a[s])return a[s].exports;var i=a[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e,a}))}}]);
//# sourceMappingURL=2251.17cd9ba4.js.map